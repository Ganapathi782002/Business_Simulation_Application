(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7717:(e,t,r)=>{Promise.resolve().then(r.bind(r,602))},602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var s=r(1133),n=r(1321);let a=(0,n.createContext)({user:null,loading:!0,error:null,logout:async()=>{}});function i(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[o,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/users/me");if(e.ok){let t=await e.json();t.user&&i(t.user)}}catch(e){console.error("Failed to fetch user session",e),d("Could not fetch user session.")}finally{l(!1)}})()},[]);let m=async()=>{try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.error("Logout API call failed.",e)}finally{window.location.href="/"}};return(0,s.jsx)(a.Provider,{value:{user:r,loading:o,error:c,logout:m},children:t})}function o(){let e=(0,n.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}class l{async getSimulation(e){return this.simulations.get(e)||null}async createSimulation(e){let t=e.id||"sim_".concat(Date.now());return e.id=t,this.simulations.set(t,e),t}async updateSimulation(e,t){let r=this.simulations.get(e);r&&this.simulations.set(e,{...r,...t})}async getCompany(e){return this.companies.get(e)||null}async getCompaniesBySimulation(e){return Array.from(this.companies.values()).filter(t=>t.simulationId===e)}async createCompany(e){let t=e.id||"company_".concat(Date.now());return e.id=t,this.companies.set(t,e),t}async updateCompany(e,t){let r=this.companies.get(e);r&&this.companies.set(e,{...r,...t})}async getProduct(e){return this.products.get(e)||null}async getProductsByCompany(e){return Array.from(this.products.values()).filter(t=>t.companyId===e)}async createProduct(e){let t=e.id||"product_".concat(Date.now());return e.id=t,this.products.set(t,e),t}async updateProduct(e,t){let r=this.products.get(e);r&&this.products.set(e,{...r,...t})}async getDecision(e){return this.decisions.get(e)||null}async getDecisionsByCompany(e,t){let r=Array.from(this.decisions.values()).filter(t=>t.companyId===e);return void 0!==t&&(r=r.filter(e=>e.period===t)),r}async createDecision(e){let t=e.id||"decision_".concat(Date.now());return e.id=t,this.decisions.set(t,e),t}async updateDecision(e,t){let r=this.decisions.get(e);r&&this.decisions.set(e,{...r,...t})}async getMarketConditions(e,t){let r="".concat(e,"_").concat(t);return this.marketConditions.get(r)||null}async createMarketConditions(e){let t=e.id||"market_".concat(Date.now());e.id=t;let r="".concat(e.simulationId,"_").concat(e.period);return this.marketConditions.set(r,e),t}async getPerformanceResults(e,t){let r="".concat(e,"_").concat(t);return this.performanceResults.get(r)||null}async getPerformanceHistory(e){return Array.from(this.performanceResults.values()).filter(t=>t.companyId===e).sort((e,t)=>e.period-t.period)}async createPerformanceResults(e){let t=e.id||"perf_".concat(Date.now());e.id=t;let r="".concat(e.companyId,"_").concat(e.period);return this.performanceResults.set(r,e),t}async getProductPerformance(e,t){let r="".concat(e,"_").concat(t);return this.productPerformance.get(r)||null}async getProductPerformanceHistory(e){return Array.from(this.productPerformance.values()).filter(t=>t.productId===e).sort((e,t)=>e.period-t.period)}async createProductPerformance(e){let t=e.id||"prod_perf_".concat(Date.now());e.id=t;let r="".concat(e.productId,"_").concat(e.period);return this.productPerformance.set(r,e),t}async getEvents(e,t){let r=Array.from(this.events.values()).filter(t=>t.simulationId===e);return void 0!==t&&(r=r.filter(e=>e.period===t)),r}async createEvent(e){let t=e.id||"event_".concat(Date.now());return e.id=t,this.events.set(t,e),t}async getUser(e){return this.users.get(e)||null}async getUserByEmail(e){return Array.from(this.users.values()).find(t=>t.email===e)||null}async createUser(e){let t=e.id||"user_".concat(Date.now());return e.id=t,this.users.set(t,e),t}async updateUser(e,t){let r=this.users.get(e);r&&this.users.set(e,{...r,...t})}constructor(){this.simulations=new Map,this.companies=new Map,this.products=new Map,this.decisions=new Map,this.marketConditions=new Map,this.performanceResults=new Map,this.productPerformance=new Map,this.events=new Map,this.users=new Map}}let c=(0,n.createContext)(null);function d(e){let{children:t}=e,r=(console.log("using d1 mock db"),new l);return(0,s.jsx)(c.Provider,{value:r,children:t})}function m(e){let{onSuccess:t,onRegisterClick:r}=e,[a,i]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(null),[m,u]=(0,n.useState)(!1),x=async e=>{if(e.preventDefault(),d(null),u(!0),!a||!o){d("Please enter both email and password"),u(!1);return}try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:o})}),t=await e.json();if(!e.ok)throw Error(t.error||"Login failed");window.location.href="/"}catch(e){d(e.message)}finally{u(!1)}};return(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,s.jsx)("h2",{className:"text-2xl text-black font-bold mb-6 text-center",children:"Login to Business Simulation"}),c&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:c}),(0,s.jsxs)("form",{onSubmit:x,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:a,onChange:e=>i(e.target.value),placeholder:"Enter your email",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:o,onChange:e=>l(e.target.value),placeholder:"Enter your password",required:!0})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full",disabled:m,children:m?"Logging in...":"Login"})}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)("button",{type:"button",className:"text-blue-500 hover:text-blue-700",onClick:r,children:"Register"})]})})]})]})}function u(e){let{onSuccess:t,onLoginClick:r}=e,[a,i]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[x,h]=(0,n.useState)(null),[p,g]=(0,n.useState)(!1),y=async e=>{if(e.preventDefault(),h(null),!a||!o||!c||!m){h("Please fill in all fields");return}if(c!==m){h("Passwords do not match");return}g(!0);try{let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:o,password:c})}),t=await e.json();if(!e.ok)throw Error(t.error||"Registration failed");window.location.href="/"}catch(e){h(e.message)}finally{g(!1)}};return(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,s.jsx)("h2",{className:"text-2xl text-black font-bold mb-6 text-center",children:"Create an Account"}),x&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:x}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Full Name"}),(0,s.jsx)("input",{id:"name",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:a,onChange:e=>i(e.target.value),placeholder:"Enter your full name",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:o,onChange:e=>l(e.target.value),placeholder:"Enter your email",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:c,onChange:e=>d(e.target.value),placeholder:"Enter your password",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"confirmPassword",children:"Confirm Password"}),(0,s.jsx)("input",{id:"confirmPassword",type:"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:m,onChange:e=>u(e.target.value),placeholder:"Confirm your password",required:!0})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full",disabled:p,children:p?"Registering...":"Register"})}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,s.jsx)("button",{type:"button",className:"text-blue-500 hover:text-blue-700",onClick:r,children:"Login"})]})})]})]})}function x(e){let{onAuthSuccess:t}=e,[r,a]=(0,n.useState)(!0),i=()=>{t&&t()};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Business Simulation"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Make strategic decisions and grow your virtual company"})]}),r?(0,s.jsx)(m,{onSuccess:i,onRegisterClick:()=>a(!1)}):(0,s.jsx)(u,{onSuccess:i,onLoginClick:()=>a(!0)})]})})}var h=r(7252);function p(e){let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"w-64 bg-gray-900 text-white flex flex-col h-screen ".concat(r),children:t})}function g(e){let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"flex items-center p-6 ".concat(r),children:t})}function y(e){let{children:t,className:r=""}=e;return(0,s.jsx)("nav",{className:"flex-1 px-4 ".concat(r),children:t})}function f(e){let{title:t,children:r,className:n=""}=e;return(0,s.jsxs)("div",{className:"mb-6 ".concat(n),children:[(0,s.jsx)("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:t}),(0,s.jsx)("div",{className:"space-y-1",children:r})]})}function b(e){let{href:t,icon:r,children:n,active:a=!1,className:i=""}=e;return(0,s.jsxs)("a",{href:t,className:"\n        flex items-center px-3 py-2 text-sm font-medium rounded-md\n        ".concat(a?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white","\n        ").concat(i,"\n      "),children:[r&&(0,s.jsx)("span",{className:"mr-3",children:r}),n]})}function j(e){let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"p-4 border-t border-gray-700 ".concat(r),children:t})}function w(e){let{title:t,actions:r,className:n=""}=e;return(0,s.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between ".concat(n),children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:t}),r&&(0,s.jsx)("div",{className:"flex items-center space-x-4",children:r})]})}function v(e){let{children:t,sidebar:r,header:n,className:a=""}=e;return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100 ".concat(a),children:[r,(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n,(0,s.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}var N=r(4216);function k(e){let{children:t}=e,[r,a]=n.useState(0),[i,l]=n.useState("dashboard"),{user:c,loading:d,logout:m}=o();return(0,s.jsx)(v,{sidebar:(0,s.jsxs)(p,{children:[(0,s.jsxs)(g,{children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8 text-indigo-500 mr-3",children:[(0,s.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,s.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,s.jsx)("path",{d:"M2 12l10 5 10-5"})]}),(0,s.jsx)("span",{className:"text-xl font-bold",children:"BusinessSim"})]}),(0,s.jsxs)(y,{children:[(0,s.jsxs)(f,{title:"Main",children:[(0,s.jsx)(b,{href:"/dashboard",active:"dashboard"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,s.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,s.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"}),(0,s.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"})]}),children:"Dashboard"}),(0,s.jsx)(b,{href:"/performance",active:"performance"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("path",{d:"M12 20V10"}),(0,s.jsx)("path",{d:"M18 20V4"}),(0,s.jsx)("path",{d:"M6 20v-4"})]}),children:"Performance"}),(0,s.jsx)(b,{href:"../market",active:"market"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]}),children:"Market"})]}),(0,s.jsxs)(f,{title:"Management",children:[(0,s.jsx)(b,{href:"/human-resources",active:"human-resources"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,s.jsx)("circle",{cx:"8.5",cy:"7",r:"4"}),(0,s.jsx)("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),(0,s.jsx)("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]}),children:"Human Resources"}),(0,s.jsx)(b,{href:"/marketing",active:"marketing"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),(0,s.jsx)("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),children:"Marketing"}),(0,s.jsx)(b,{href:"/production",active:"production"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),children:"Production"}),(0,s.jsx)(b,{href:"/finance",active:"finance"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,s.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),children:"Finance"}),(0,s.jsx)(b,{href:"/research",active:"research"===i,icon:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:(0,s.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),children:"R&D"})]}),(0,s.jsxs)(f,{title:"Products",children:[(0,s.jsx)(b,{href:"/products",active:"products"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),(0,s.jsx)("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),(0,s.jsx)("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),children:"Product Catalog"}),(0,s.jsx)(b,{href:"/products/new",active:"new-product"===i,icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,s.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),children:"New Product"})]})]}),(0,s.jsx)(j,{children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-semibold mr-3",children:null==c?void 0:c.name[0]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-white",children:null==c?void 0:c.name}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:null==c?void 0:c.role.toUpperCase()})]})]}),(0,s.jsx)(N.$,{onClick:m,variant:"primary",children:"Logout"})]})})]}),header:(0,s.jsx)(w,{title:"Business Simulation",actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-md px-3 py-1.5",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-500 mr-2",children:"Period:"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Q",r+1," 2025"]})]}),(0,s.jsx)(N.$,{variant:"primary",onClick:()=>a(r+1),children:"Advance to Next Period"})]})}),children:t})}var P=r(6880),S=r(6647),C=r(3587),L=r.n(C);function M(){let{state:e,userCompany:t,companyProducts:r,advancePeriod:n,loading:a,error:i}=(0,h.$)(),{getCompanyPerformance:o,getMarketConditions:l,getMarketEvents:c,getCurrentPeriod:d}=(0,S.R)(),{submitProductDevelopment:m,submitProduction:u,submitMarketing:x,submitPricing:p}=(0,P.a)(),g=d(),y=o(),f=l(),b=c(g),j=(e,t)=>{u({productId:e,productionVolume:t})},w=(e,t)=>{p({productId:e,price:t})},v=(e,t)=>{x({productId:e,budget:t})},k=e=>{m({action:"new_product",...e})};return a?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Loading simulation..."})}):i?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-red-600",children:"Error"}),(0,s.jsx)("p",{children:i})]}):t?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Period ",g]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(L(),{href:"/new-simulation",children:(0,s.jsx)(N.$,{variant:"outline",children:"Create New Simulation"})}),(0,s.jsx)("button",{onClick:()=>{n()},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Advance to Next Period"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Financial Overview"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Cash Balance"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-700",children:["$",t.cashBalance.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Total Assets"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-700",children:["$",t.totalAssets.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Total Liabilities"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-700",children:["$",t.totalLiabilities.toLocaleString()]})]})]}),y&&(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Revenue"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["$",y.revenue.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Costs"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ",children:["$",y.costs.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Profit"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat(y.profit>=0?"text-green-600":"text-red-600"),children:["$",y.profit.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Market Share"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:[(100*y.marketShare).toFixed(1),"%"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-black text-xl font-semibold mb-4",children:"Products"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full bg-white",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Quality"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Price"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Inventory"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:r.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"py-2 px-4 border-b border-gray-200 text-gray-900",children:e.name}),(0,s.jsx)("td",{className:"py-2 px-4 border-b border-gray-200 text-gray-900",children:e.category.charAt(0).toUpperCase()+e.category.slice(1)}),(0,s.jsx)("td",{className:"py-2 px-4 border-b border-gray-200 text-gray-900",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"development"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,s.jsx)("td",{className:"py-2 px-4 border-b border-gray-200 text-gray-900",children:e.qualityRating.toFixed(1)}),(0,s.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200 text-gray-900",children:["$",e.sellingPrice]}),(0,s.jsx)("td",{className:"py-2 px-4 border-b border-gray-200 text-gray-900",children:e.inventoryLevel}),(0,s.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200 text-gray-900",children:[(0,s.jsx)("button",{onClick:()=>j(e.id,1e3),className:"text-blue-600 hover:text-blue-900 mr-2",children:"Produce"}),(0,s.jsx)("button",{onClick:()=>w(e.id,e.sellingPrice+10),className:"text-green-600 hover:text-green-900 mr-2",children:"Adjust Price"}),(0,s.jsx)("button",{onClick:()=>v(e.id,1e4),className:"text-purple-600 hover:text-purple-900",children:"Marketing"})]})]},e.id))})]})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{onClick:()=>k({name:"New Product",description:"A new product",category:"mid-range",qualityRating:6,innovationRating:5,sustainabilityRating:5,productionCost:100,sellingPrice:200,productionCapacity:2e3,developmentCost:1e5,developmentTime:1}),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Develop New Product"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Market Information"}),f&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2 text-gray-600",children:"Market Conditions"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Total Market Size"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-gray-600",children:["$",f.totalMarketSize.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Sustainability Importance"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-gray-600",children:[(100*f.sustainabilityImportance).toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Segments"}),(0,s.jsx)("p",{className:"text-xl font-bold text-gray-600",children:Object.keys(JSON.parse(f.segmentDistribution)).length})]})]})]}),b.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Market Events"}),(0,s.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,s.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-md",children:[(0,s.jsx)("h4",{className:"font-semibold",children:e.name}),(0,s.jsx)("p",{className:"text-gray-700",children:e.description}),(0,s.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Impact: ",e.impactArea]}),(0,s.jsx)("span",{className:"mx-2",children:"â€¢"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Strength: ",e.impactStrength>0?"+":"",(100*e.impactStrength).toFixed(0),"%"]})]})]},e.id))})]})]})]}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"No company found"}),(0,s.jsx)("p",{children:"Please create a company to start the simulation."})]})}function I(){let{user:e,loading:t}=o();return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Loading..."}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Please wait while we set up your simulation"})]})}):e?(0,s.jsx)(h.n,{children:(0,s.jsx)(k,{children:(0,s.jsx)(M,{})})}):(0,s.jsx)(x,{})}function A(){return(0,s.jsx)(d,{children:(0,s.jsx)(i,{children:(0,s.jsx)(I,{})})})}},6880:(e,t,r)=>{"use strict";r.d(t,{a:()=>n}),r(1321);var s=r(7252);function n(){let{submitDecision:e,userCompany:t,state:r}=(0,s.$)();return{submitProductDevelopment:s=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"product_development",data:JSON.stringify(s),submittedAt:new Date().toISOString()})},submitPricing:s=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"pricing",data:JSON.stringify(s),submittedAt:new Date().toISOString()})},submitProduction:s=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"production",data:JSON.stringify(s),submittedAt:new Date().toISOString()})},submitMarketing:s=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"marketing",data:JSON.stringify(s),submittedAt:new Date().toISOString()})},submitResearch:s=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"research",data:JSON.stringify(s),submittedAt:new Date().toISOString()})},submitHumanResources:s=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"human_resources",data:JSON.stringify(s),submittedAt:new Date().toISOString()})},submitFinance:s=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"finance",data:JSON.stringify(s),submittedAt:new Date().toISOString()})}}}},6647:(e,t,r)=>{"use strict";r.d(t,{R:()=>n}),r(1321);var s=r(7252);function n(){let{state:e,userCompany:t,companyProducts:r}=(0,s.$)(),n=t=>e?void 0!==t?e.marketConditions.find(e=>e.period===t)||null:e.marketConditions.sort((e,t)=>t.period-e.period)[0]||null:null;return{getCompanyPerformance:r=>e&&t?void 0!==r?e.performanceResults.find(e=>e.companyId===t.id&&e.period===r)||null:e.performanceResults.filter(e=>e.companyId===t.id).sort((e,t)=>t.period-e.period)[0]||null:null,getCompanyPerformanceHistory:()=>e&&t?e.performanceResults.filter(e=>e.companyId===t.id).sort((e,t)=>e.period-t.period):[],getProductPerformance:(t,r)=>e?void 0!==r?e.productPerformance.find(e=>e.productId===t&&e.period===r)||null:e.productPerformance.filter(e=>e.productId===t).sort((e,t)=>t.period-e.period)[0]||null:null,getProductPerformanceHistory:t=>e?e.productPerformance.filter(e=>e.productId===t).sort((e,t)=>e.period-t.period):[],getMarketConditions:n,getMarketEvents:t=>e?void 0!==t?e.events.filter(e=>e.period===t):e.events.sort((e,t)=>e.period-t.period):[],getCurrentPeriod:()=>e?e.currentPeriod:0,getCompetitors:()=>e&&t?[{id:"competitor_1",name:"Alpha Corp",marketShare:24.5,growth:3.2,strengths:["Brand Recognition","Product Quality","Innovation"],weaknesses:["High Prices","Limited Product Range"],strategy:"Differentiation",products:[{name:"Alpha Premium",segment:"premium",price:320,quality:8.7,share:35},{name:"Alpha Standard",segment:"mid-range",price:180,quality:7.2,share:22}]},{id:"competitor_2",name:"Beta Inc",marketShare:19.8,growth:4.5,strengths:["Competitive Pricing","Wide Distribution","Marketing"],weaknesses:["Average Quality","Customer Service"],strategy:"Cost Leadership",products:[{name:"Beta Elite",segment:"premium",price:280,quality:8.2,share:28},{name:"Beta Standard",segment:"mid-range",price:160,quality:6.8,share:18},{name:"Beta Basic",segment:"budget",price:70,quality:5.1,share:15}]},{id:"competitor_3",name:"Gamma Ltd",marketShare:15.2,growth:-.8,strengths:["Low Prices","Efficiency","Market Coverage"],weaknesses:["Product Quality","Innovation","Brand Perception"],strategy:"Cost Focus",products:[{name:"Gamma Standard",segment:"mid-range",price:140,quality:6.2,share:14},{name:"Gamma Basic",segment:"budget",price:60,quality:4.8,share:25}]}]:[],getMarketSegments:()=>{if(!e)return[];let t=n();if(!t)return[];let r=JSON.parse(t.segmentDistribution),s=JSON.parse(t.consumerPreferences);return Object.keys(r).map(e=>{let n=s[e]||{};return{id:e,name:e.charAt(0).toUpperCase()+e.slice(1).replace("-"," "),size:t.totalMarketSize*r[e],share:100*r[e],growth:3+4*Math.random()-2,priceRange:"premium"===e?"$250-$500":"mid-range"===e?"$100-$250":"$50-$100",qualitySensitivity:n.quality_sensitivity>.6?"High":n.quality_sensitivity>.4?"Medium":"Low",priceSensitivity:n.price_sensitivity>.6?"High":n.price_sensitivity>.4?"Medium":"Low",innovationPreference:n.innovation_preference>.6?"High":n.innovation_preference>.4?"Medium":"Low",sustainabilityPreference:n.sustainability_preference>.6?"High":n.sustainability_preference>.4?"Medium":"Low"}})}}}},4216:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var s=r(1133);function n(e){let{children:t,variant:r="primary",size:n="md",className:a="",onClick:i,disabled:o=!1,type:l="button",icon:c}=e;return(0,s.jsxs)("button",{type:l,className:"".concat("inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat({primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-indigo-500",outline:"bg-transparent text-indigo-600 border border-indigo-600 hover:bg-indigo-50 focus:ring-indigo-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[r]," ").concat({sm:"text-xs px-2.5 py-1.5 rounded",md:"text-sm px-4 py-2 rounded-md",lg:"text-base px-6 py-3 rounded-md"}[n]," ").concat(a),onClick:i,disabled:o,children:[c&&(0,s.jsx)("span",{className:"mr-2",children:c}),t]})}r(1321)}},e=>{var t=t=>e(e.s=t);e.O(0,[587,252,634,775,358],()=>t(7717)),_N_E=e.O()}]);