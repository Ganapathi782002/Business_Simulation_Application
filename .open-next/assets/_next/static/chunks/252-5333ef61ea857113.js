"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{7252:(e,t,i)=>{i.d(t,{n:()=>d,$:()=>c});var a=i(1133),n=i(1321);class r{getState(){return this.state}advancePeriod(){return this.processDecisions(),this.updateMarketConditions(),this.calculatePerformance(),this.state.currentPeriod+=1,this.state}processDecisions(){let e=this.state.decisions.filter(e=>e.period===this.state.currentPeriod&&!e.processed),t={};e.forEach(e=>{t[e.companyId]||(t[e.companyId]=[]),t[e.companyId].push(e)}),Object.entries(t).forEach(e=>{let[t,i]=e,a=this.state.companies.find(e=>e.id===t);a&&i.forEach(e=>{this.processDecision(a,e),e.processed=!0,e.processedAt=new Date().toISOString()})})}processDecision(e,t){let i=t.data;switch(t.type){case"product_development":this.processProductDevelopment(e,i);break;case"pricing":this.processPricing(e,i);break;case"production":this.processProduction(e,i);break;case"marketing":this.processMarketing(e,i);break;case"research":this.processResearch(e,i);break;case"human_resources":this.processHumanResources(e,i);break;case"finance":this.processFinance(e,i)}}processProductDevelopment(e,t){if("new_product"===t.action){let i={id:"product_".concat(Date.now()),companyId:e.id,name:t.name,description:t.description||"",category:t.category,qualityRating:t.qualityRating||5,innovationRating:t.innovationRating||5,sustainabilityRating:t.sustainabilityRating||5,productionCost:t.productionCost,sellingPrice:t.sellingPrice,inventoryLevel:0,productionCapacity:t.productionCapacity||1e3,developmentCost:t.developmentCost||0,marketingBudget:0,status:"development",launchPeriod:this.state.currentPeriod+(t.developmentTime||1),data:JSON.stringify({features:t.features||[],targetAudience:t.targetAudience||""}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),discontinuePeriod:null};this.state.products.push(i),e.cashBalance-=t.developmentCost||0}else if("update_product"===t.action){let i=this.state.products.find(e=>e.id===t.productId);if(!i)return;t.name&&(i.name=t.name),t.description&&(i.description=t.description),t.qualityRating&&(i.qualityRating=t.qualityRating),t.innovationRating&&(i.innovationRating=t.innovationRating),t.sustainabilityRating&&(i.sustainabilityRating=t.sustainabilityRating),t.productionCost&&(i.productionCost=t.productionCost),t.productionCapacity&&(i.productionCapacity=t.productionCapacity);let a=JSON.parse(i.data);t.features&&(a.features=t.features),t.targetAudience&&(a.targetAudience=t.targetAudience),i.data=JSON.stringify(a),i.updatedAt=new Date().toISOString(),t.developmentCost&&(e.cashBalance-=t.developmentCost)}else if("discontinue_product"===t.action){let e=this.state.products.find(e=>e.id===t.productId);if(!e)return;e.status="discontinued",e.discontinuePeriod=this.state.currentPeriod,e.updatedAt=new Date().toISOString()}}processPricing(e,t){if(t.productId){let i=this.state.products.find(i=>i.id===t.productId&&i.companyId===e.id);i&&(i.sellingPrice=t.price,i.updatedAt=new Date().toISOString())}else t.products&&t.products.forEach(t=>{let i=this.state.products.find(i=>i.id===t.productId&&i.companyId===e.id);i&&(i.sellingPrice=t.price,i.updatedAt=new Date().toISOString())})}processProduction(e,t){if(t.productId){let i=this.state.products.find(i=>i.id===t.productId&&i.companyId===e.id);if(!i)return;let a=Math.min(t.productionVolume,i.productionCapacity),n=a*i.productionCost;i.inventoryLevel+=a,e.cashBalance-=n,i.updatedAt=new Date().toISOString()}else if(t.products){let i=0;t.products.forEach(t=>{let a=this.state.products.find(i=>i.id===t.productId&&i.companyId===e.id);if(!a)return;let n=Math.min(t.productionVolume,a.productionCapacity),r=n*a.productionCost;a.inventoryLevel+=n,i+=r,a.updatedAt=new Date().toISOString()}),e.cashBalance-=i}if(t.capacityExpansion){let i=this.state.products.find(i=>i.id===t.capacityExpansion.productId&&i.companyId===e.id);if(!i)return;i.productionCapacity+=t.capacityExpansion.capacityIncrease,e.cashBalance-=t.capacityExpansion.investmentAmount,i.updatedAt=new Date().toISOString()}}processMarketing(e,t){if(t.productId){let i=this.state.products.find(i=>i.id===t.productId&&i.companyId===e.id);i&&(i.marketingBudget=t.budget,e.cashBalance-=t.budget,i.updatedAt=new Date().toISOString())}else if(t.products){let i=0;t.products.forEach(t=>{let a=this.state.products.find(i=>i.id===t.productId&&i.companyId===e.id);a&&(a.marketingBudget=t.budget,i+=t.budget,a.updatedAt=new Date().toISOString())}),e.cashBalance-=i}else if("company"===t.campaignType){e.cashBalance-=t.budget;let i={id:"campaign_".concat(Date.now()),companyId:e.id,name:t.name,budget:t.budget,startPeriod:this.state.currentPeriod,duration:t.duration||1,targetSegment:t.targetSegment||"all",channelAllocation:t.channelAllocation||{},message:t.message||""},a=JSON.parse(e.data);a.marketingCampaigns||(a.marketingCampaigns=[]),a.marketingCampaigns.push(i),e.data=JSON.stringify(a)}}processResearch(e,t){let i={id:"research_".concat(Date.now()),companyId:e.id,name:t.name,description:t.description||"",type:t.type,budget:t.budget,startPeriod:this.state.currentPeriod,duration:t.duration||1,progress:0,status:"active"};e.cashBalance-=t.budget;let a=JSON.parse(e.data);a.researchProjects||(a.researchProjects=[]),a.researchProjects.push(i),e.data=JSON.stringify(a)}processHumanResources(e,t){let i=JSON.parse(e.data);i.humanResources||(i.humanResources={totalEmployees:100,averageSalary:5e4,trainingBudget:0,employeeSatisfaction:50,productivity:1,turnoverRate:.15});let a=i.humanResources;if(t.hiring){a.totalEmployees+=t.hiring.newEmployees;let i=t.hiring.newEmployees*(.2*a.averageSalary);e.cashBalance-=i}if(t.salary){let i=a.averageSalary;a.averageSalary=t.salary.newAverageSalary;let n=(a.averageSalary-i)*a.totalEmployees;e.cashBalance-=n}t.training&&(a.trainingBudget=t.training.budget,e.cashBalance-=t.training.budget),e.data=JSON.stringify(i)}processFinance(e,t){if("loan"===t.action){e.cashBalance+=t.amount,e.totalLiabilities+=t.amount;let i=JSON.parse(e.data);i.loans||(i.loans=[]),i.loans.push({id:"loan_".concat(Date.now()),amount:t.amount,interestRate:t.interestRate,term:t.term,startPeriod:this.state.currentPeriod,remainingAmount:t.amount}),e.data=JSON.stringify(i)}else if("repay_loan"===t.action){let i=JSON.parse(e.data);if(!i.loans)return;let a=i.loans.find(e=>e.id===t.loanId);if(!a)return;let n=Math.min(t.amount,a.remainingAmount);a.remainingAmount-=n,e.cashBalance-=n,e.totalLiabilities-=n,e.data=JSON.stringify(i)}else if("dividend"===t.action){e.cashBalance-=t.amount;let i=JSON.parse(e.data);i.dividends||(i.dividends=[]),i.dividends.push({period:this.state.currentPeriod,amount:t.amount}),e.data=JSON.stringify(i)}}updateMarketConditions(){let e=this.state.marketConditions.find(e=>e.period===this.state.currentPeriod);if(!e)return;let t=this.state.currentPeriod+1,i=JSON.parse(e.segmentDistribution),a=JSON.parse(e.economicIndicators),n=JSON.parse(e.consumerPreferences),r=JSON.parse(e.technologyTrends),o=1+(.1*Math.random()-.05),s=e.totalMarketSize*o;Object.keys(i).forEach(e=>{let t=1+(.06*Math.random()-.03);i[e]*=t});let c=Object.values(i).reduce((e,t)=>e+t,0);Object.keys(i).forEach(e=>{i[e]/=c}),a.gdp_growth+=.01*Math.random()-.005,a.inflation_rate+=.01*Math.random()-.005,a.interest_rate+=.01*Math.random()-.005,a.unemployment_rate+=.01*Math.random()-.005,a.consumer_confidence+=5*Math.random()-2.5,a.business_sentiment+=5*Math.random()-2.5,Object.keys(n).forEach(e=>{Object.keys(n[e]).forEach(t=>{n[e][t]+=.1*Math.random()-.05,n[e][t]=Math.max(0,Math.min(1,n[e][t]))})});let d=.05*Math.random(),u=Math.min(1,e.sustainabilityImportance+d),p={id:"market_".concat(t),simulationId:e.simulationId,period:t,totalMarketSize:s,segmentDistribution:JSON.stringify(i),economicIndicators:JSON.stringify(a),consumerPreferences:JSON.stringify(n),technologyTrends:JSON.stringify(r),sustainabilityImportance:u,data:"{}",createdAt:new Date().toISOString()};this.state.marketConditions.push(p),this.generateMarketEvents(t)}generateMarketEvents(e){let t;if(Math.random()>.3)return;let i=["economic","technological","regulatory","competitive","consumer"];switch(i[Math.floor(Math.random()*i.length)]){case"economic":t=this.generateEconomicEvent(e);break;case"technological":t=this.generateTechnologicalEvent(e);break;case"regulatory":t=this.generateRegulatoryEvent(e);break;case"competitive":t=this.generateCompetitiveEvent(e);break;case"consumer":t=this.generateConsumerEvent(e);break;default:return}t&&this.state.events.push(t)}generateEconomicEvent(e){let t=[{name:"Economic Boom",description:"A strong economic growth period has begun, increasing consumer spending across all segments.",impactArea:"market_size",impactStrength:.15,type:"economic"},{name:"Economic Recession",description:"An economic downturn has begun, reducing consumer spending across all segments.",impactArea:"market_size",impactStrength:-.1,type:"economic"},{name:"Interest Rate Hike",description:"Central bank has increased interest rates, affecting borrowing costs.",impactArea:"finance",impactStrength:.02,type:"economic"},{name:"Currency Fluctuation",description:"Significant currency value changes affecting import/export costs.",impactArea:"production_cost",impactStrength:Math.random()>.5?.08:-.08,type:"economic"}],i=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"economic",name:i.name,description:i.description,impactArea:i.impactArea,impactStrength:i.impactStrength,affectedCompanies:null,data:JSON.stringify(i),createdAt:new Date().toISOString()}}generateTechnologicalEvent(e){let t=[{name:"Technological Breakthrough",description:"A major technological breakthrough has occurred, creating new opportunities for innovation.",impactArea:"innovation",impactStrength:.2,type:"technological"},{name:"Manufacturing Innovation",description:"New manufacturing techniques have been developed, potentially reducing production costs.",impactArea:"production_cost",impactStrength:-.1,type:"technological"},{name:"Digital Transformation Trend",description:"Increasing consumer preference for digitally-enabled products and services.",impactArea:"consumer_preferences",impactStrength:.15,type:"technological"}],i=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"technological",name:i.name,description:i.description,impactArea:i.impactArea,impactStrength:i.impactStrength,affectedCompanies:null,data:JSON.stringify(i),createdAt:new Date().toISOString()}}generateRegulatoryEvent(e){let t=[{name:"Environmental Regulations",description:"New environmental regulations require changes to production processes.",impactArea:"sustainability",impactStrength:.25,type:"regulatory"},{name:"Tax Policy Change",description:"Changes in tax policy affecting corporate profits.",impactArea:"finance",impactStrength:-.05,type:"regulatory"},{name:"Labor Law Changes",description:"New labor laws affecting employment costs and practices.",impactArea:"human_resources",impactStrength:.08,type:"regulatory"}],i=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"regulatory",name:i.name,description:i.description,impactArea:i.impactArea,impactStrength:i.impactStrength,affectedCompanies:null,data:JSON.stringify(i),createdAt:new Date().toISOString()}}generateCompetitiveEvent(e){let t=[{name:"New Market Entrant",description:"A new competitor has entered the market with innovative products.",impactArea:"market_share",impactStrength:-.05,type:"competitive"},{name:"Competitor Price War",description:"A major competitor has significantly reduced prices to gain market share.",impactArea:"pricing",impactStrength:-.1,type:"competitive"},{name:"Industry Consolidation",description:"Merger between competitors creating a stronger market player.",impactArea:"competition",impactStrength:.15,type:"competitive"}],i=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"competitive",name:i.name,description:i.description,impactArea:i.impactArea,impactStrength:i.impactStrength,affectedCompanies:null,data:JSON.stringify(i),createdAt:new Date().toISOString()}}generateConsumerEvent(e){let t=[{name:"Shifting Consumer Preferences",description:"Consumers are showing stronger preference for sustainable products.",impactArea:"consumer_preferences",impactStrength:.2,type:"consumer"},{name:"Quality Expectations Increase",description:"Consumers are demanding higher quality products across all segments.",impactArea:"quality",impactStrength:.15,type:"consumer"},{name:"Brand Loyalty Shift",description:"Consumers are becoming less brand loyal and more value-focused.",impactArea:"marketing",impactStrength:-.1,type:"consumer"}],i=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"consumer",name:i.name,description:i.description,impactArea:i.impactArea,impactStrength:i.impactStrength,affectedCompanies:null,data:JSON.stringify(i),createdAt:new Date().toISOString()}}calculatePerformance(){let e=this.state.marketConditions.find(e=>e.period===this.state.currentPeriod);e&&(JSON.parse(e.segmentDistribution),JSON.parse(e.consumerPreferences),e.totalMarketSize,this.state.companies.forEach(t=>{let i=this.state.products.filter(e=>e.companyId===t.id&&"active"===e.status);if(0===i.length){this.createMinimalPerformanceResults(t);return}let a=0,n=0,r=0;i.forEach(t=>{let o=this.calculateProductPerformance(t,i,e);a+=o.revenue,n+=o.costs,r+=o.marketShare,this.state.productPerformance.push({id:"prod_perf_".concat(t.id,"_").concat(this.state.currentPeriod),productId:t.id,period:this.state.currentPeriod,salesVolume:o.salesVolume,revenue:o.revenue,costs:o.costs,profit:o.profit,marketShare:o.marketShare,customerSatisfaction:o.customerSatisfaction,data:JSON.stringify(o),createdAt:new Date().toISOString()}),t.inventoryLevel=Math.max(0,t.inventoryLevel-o.salesVolume)});let o=a-n,s=n>0?o/n:0,c=JSON.parse(t.data).humanResources||{employeeSatisfaction:50},d=this.state.productPerformance.filter(e=>e.period===this.state.currentPeriod).filter(e=>{let i=this.state.products.find(t=>t.id===e.productId);return i&&i.companyId===t.id}).reduce((e,t)=>e+t.customerSatisfaction,0)/i.length,u=i.reduce((e,t)=>e+t.innovationRating,0)/i.length,p=i.reduce((e,t)=>e+t.sustainabilityRating,0)/i.length,l=.3*r+.3*d+.2*u+.2*p-5;t.cashBalance+=o,t.totalAssets=t.cashBalance+.5*a,t.brandValue=Math.max(1,Math.min(100,t.brandValue+l));let m={id:"perf_".concat(t.id,"_").concat(this.state.currentPeriod),companyId:t.id,period:this.state.currentPeriod,revenue:a,costs:n,profit:o,marketShare:r,cashFlow:o,roi:s,customerSatisfaction:d,employeeSatisfaction:c.employeeSatisfaction,sustainabilityScore:p,innovationScore:u,brandValueChange:l,data:JSON.stringify({productBreakdown:i.map(e=>{var t,i;return{productId:e.id,name:e.name,revenue:(null===(t=this.state.productPerformance.find(t=>t.productId===e.id&&t.period===this.state.currentPeriod))||void 0===t?void 0:t.revenue)||0,marketShare:(null===(i=this.state.productPerformance.find(t=>t.productId===e.id&&t.period===this.state.currentPeriod))||void 0===i?void 0:i.marketShare)||0}})}),createdAt:new Date().toISOString()};this.state.performanceResults.push(m)}))}createMinimalPerformanceResults(e){let t=JSON.parse(e.data).humanResources||{employeeSatisfaction:50};e.cashBalance-=5e4;let i={id:"perf_".concat(e.id,"_").concat(this.state.currentPeriod),companyId:e.id,period:this.state.currentPeriod,revenue:0,costs:5e4,profit:-5e4,marketShare:0,cashFlow:-5e4,roi:0,customerSatisfaction:0,employeeSatisfaction:t.employeeSatisfaction,sustainabilityScore:0,innovationScore:0,brandValueChange:-5,data:JSON.stringify({productBreakdown:[]}),createdAt:new Date().toISOString()};this.state.performanceResults.push(i),e.brandValue=Math.max(1,e.brandValue-5)}calculateProductPerformance(e,t,i){let a=JSON.parse(i.segmentDistribution),n=JSON.parse(i.consumerPreferences),r=i.totalMarketSize,o=e.category,s=a[o]||0,c=n[o]||{},d=t.filter(t=>"active"===t.status&&t.category===o&&t.id!==e.id),u=e.qualityRating*(c.quality_sensitivity||.5),p=(10-e.sellingPrice/50)*(c.price_sensitivity||.5),l=e.innovationRating*(c.innovation_preference||.5),m=e.sustainabilityRating*(c.sustainability_preference||.5),g=.5*Math.sqrt(e.marketingBudget/1e4),h=u+p+l+m+g,y=.1;if(d.length>0){let e=h+d.reduce((e,t)=>{let i=t.qualityRating*(c.quality_sensitivity||.5),a=(10-t.sellingPrice/50)*(c.price_sensitivity||.5);return e+i+a+t.innovationRating*(c.innovation_preference||.5)+t.sustainabilityRating*(c.sustainability_preference||.5)+.5*Math.sqrt(t.marketingBudget/1e4)},0);y=h/e}let f=y*s,S=Math.round(r*s*y/e.sellingPrice),v=Math.min(S,e.inventoryLevel),I=v*e.sellingPrice,_=v*e.productionCost,b=e.marketingBudget,P=_+b;return{salesVolume:v,potentialSales:S,revenue:I,productionCosts:_,marketingCosts:b,costs:P,profit:I-P,segmentMarketShare:y,marketShare:f,customerSatisfaction:Math.min(10,.4*u+.4*(e.qualityRating/(e.sellingPrice/50))+v/S*.2),attractivenessFactors:{qualityScore:u,priceScore:p,innovationScore:l,sustainabilityScore:m,marketingEffectiveness:g,totalAttractiveness:h}}}submitDecision(e,t){let i={id:"decision_".concat(Date.now()),companyId:e,period:this.state.currentPeriod,type:t.type,data:t.data,submittedAt:new Date().toISOString(),processed:!1,processedAt:null};this.state.decisions.push(i)}getCompanyPerformance(e,t){return void 0!==t?this.state.performanceResults.find(i=>i.companyId===e&&i.period===t)||null:this.state.performanceResults.filter(t=>t.companyId===e).sort((e,t)=>t.period-e.period)[0]||null}getAllCompanyPerformance(e){return this.state.performanceResults.filter(t=>t.companyId===e).sort((e,t)=>e.period-t.period)}getProductPerformance(e,t){return void 0!==t?this.state.productPerformance.find(i=>i.productId===e&&i.period===t)||null:this.state.productPerformance.filter(t=>t.productId===e).sort((e,t)=>t.period-e.period)[0]||null}getAllProductPerformance(e){return this.state.productPerformance.filter(t=>t.productId===e).sort((e,t)=>e.period-t.period)}getMarketConditions(e){return void 0!==e?this.state.marketConditions.find(t=>t.period===e)||null:this.state.marketConditions.sort((e,t)=>t.period-e.period)[0]||null}getEvents(e){return void 0!==e?this.state.events.filter(t=>t.period===e):this.state.events.sort((e,t)=>e.period-t.period)}getCompany(e){return this.state.companies.find(t=>t.id===e)||null}getCompanyProducts(e){return this.state.products.filter(t=>t.companyId===e)}getProduct(e){return this.state.products.find(t=>t.id===e)||null}constructor(e){this.state=e}}class o{static create(e){let t=new Date().toISOString(),i="sim_".concat(Date.now());return Date.now(),{id:i,name:e.simulationName,description:e.description,config:JSON.stringify({}),currentPeriod:0,status:"active",createdBy:e.userId,createdAt:t,updatedAt:t,companies:[],products:[],decisions:[],marketConditions:[{id:"market_".concat(i,"_0"),simulationId:i,period:0,totalMarketSize:5e7,segmentDistribution:JSON.stringify({premium:.3,"mid-range":.5,budget:.2}),economicIndicators:JSON.stringify({gdp_growth:.02,inflation_rate:.01,interest_rate:.03,unemployment_rate:.05,consumer_confidence:70,business_sentiment:75}),consumerPreferences:JSON.stringify({premium:{quality_sensitivity:.8,price_sensitivity:.3},"mid-range":{quality_sensitivity:.5,price_sensitivity:.5},budget:{quality_sensitivity:.2,price_sensitivity:.8}}),technologyTrends:JSON.stringify([]),sustainabilityImportance:.3,data:JSON.stringify({}),createdAt:t}],performanceResults:[],productPerformance:[],events:[]}}static createDemoSimulation(){return new r({id:"sim_demo",name:"Business Strategy Simulation",description:"A simulation focused on strategic decision-making",config:JSON.stringify({initialCash:1e6,periods:12,marketSegments:["budget","mid-range","premium"],difficulty:"medium",eventsFrequency:.3}),currentPeriod:0,status:"active",createdBy:"user_demo",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),companies:[{id:"company_demo",simulationId:"sim_demo",userId:"user_demo",name:"TechInnovate Inc.",description:"A technology innovation company",logoUrl:null,cashBalance:1e6,totalAssets:1e6,totalLiabilities:0,creditRating:"B",brandValue:50,data:JSON.stringify({missionStatement:"To innovate and transform technology",competitiveStrategy:"differentiator",humanResources:{totalEmployees:100,averageSalary:5e4,trainingBudget:0,employeeSatisfaction:50,productivity:1,turnoverRate:.15}}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],products:[{id:"product_demo_1",companyId:"company_demo",name:"Premium Widget",description:"Our flagship premium widget",category:"premium",qualityRating:8.5,innovationRating:7.2,sustainabilityRating:6.8,productionCost:150,sellingPrice:300,inventoryLevel:1e3,productionCapacity:2e3,developmentCost:2e5,marketingBudget:5e4,status:"active",launchPeriod:0,discontinuePeriod:null,data:JSON.stringify({features:["Advanced AI","Premium Materials","Extended Warranty"],targetAudience:"High-income professionals"}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"product_demo_2",companyId:"company_demo",name:"Standard Widget",description:"Our mid-range widget offering",category:"mid-range",qualityRating:6.5,innovationRating:5.8,sustainabilityRating:6,productionCost:75,sellingPrice:150,inventoryLevel:1500,productionCapacity:3e3,developmentCost:1e5,marketingBudget:3e4,status:"active",launchPeriod:0,discontinuePeriod:null,data:JSON.stringify({features:["Reliable Performance","Good Value"],targetAudience:"Middle-income consumers"}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"product_demo_3",companyId:"company_demo",name:"Basic Widget",description:"Our entry-level widget",category:"budget",qualityRating:4.5,innovationRating:3.2,sustainabilityRating:5,productionCost:40,sellingPrice:80,inventoryLevel:0,productionCapacity:4e3,developmentCost:5e4,marketingBudget:0,status:"development",launchPeriod:1,discontinuePeriod:null,data:JSON.stringify({features:["Essential Functionality","Affordable"],targetAudience:"Budget-conscious consumers"}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],decisions:[],marketConditions:[{id:"market_demo_0",simulationId:"sim_demo",period:0,totalMarketSize:5e6,segmentDistribution:JSON.stringify({budget:.3,"mid-range":.4,premium:.3}),economicIndicators:JSON.stringify({gdp_growth:.028,inflation_rate:.021,interest_rate:.035,unemployment_rate:.042,consumer_confidence:102.8,business_sentiment:56.4}),consumerPreferences:JSON.stringify({budget:{price_sensitivity:.8,quality_sensitivity:.3,brand_loyalty:.2,innovation_preference:.2,sustainability_preference:.2},"mid-range":{price_sensitivity:.5,quality_sensitivity:.5,brand_loyalty:.4,innovation_preference:.4,sustainability_preference:.4},premium:{price_sensitivity:.3,quality_sensitivity:.8,brand_loyalty:.7,innovation_preference:.6,sustainability_preference:.6}}),technologyTrends:JSON.stringify([{name:"AI and Machine Learning",impact_area:"product_development",impact_strength:.25,adoption_rate:.4},{name:"Internet of Things",impact_area:"customer_experience",impact_strength:.2,adoption_rate:.35}]),sustainabilityImportance:.67,data:"{}",createdAt:new Date().toISOString()}],performanceResults:[],productPerformance:[],events:[]})}}let s=(0,n.createContext)({simulation:null,state:null,loading:!0,error:null,userCompany:null,companyProducts:[],advancePeriod:()=>{},submitDecision:()=>{},refreshState:()=>{}}),c=()=>(0,n.useContext)(s),d=e=>{let{children:t}=e,[i,r]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(!0),[l,m]=(0,n.useState)(null),[g,h]=(0,n.useState)(null),[y,f]=(0,n.useState)([]);(0,n.useEffect)(()=>{try{let e=o.createDemoSimulation();r(e);let t=e.getState();d(t);let i=t.companies.find(e=>"company_demo"===e.id);if(h(i||null),i){let e=t.products.filter(e=>e.companyId===i.id);f(e)}p(!1)}catch(e){m("Failed to initialize simulation: "+(e instanceof Error?e.message:String(e))),p(!1)}},[]);let S=()=>{if(i)try{let e=i.getState();if(d(e),g){let t=e.companies.find(e=>e.id===g.id);if(h(t||null),t){let i=e.products.filter(e=>e.companyId===t.id);f(i)}}}catch(e){m("Failed to refresh state: "+(e instanceof Error?e.message:String(e)))}};return(0,a.jsx)(s.Provider,{value:{simulation:i,state:c,loading:u,error:l,userCompany:g,companyProducts:y,advancePeriod:()=>{if(i)try{let e=i.advancePeriod();if(d(e),g){let t=e.companies.find(e=>e.id===g.id);if(h(t||null),t){let i=e.products.filter(e=>e.companyId===t.id);f(i)}}}catch(e){m("Failed to advance period: "+(e instanceof Error?e.message:String(e)))}},submitDecision:e=>{if(i&&g)try{i.submitDecision(g.id,e),S()}catch(e){m("Failed to submit decision: "+(e instanceof Error?e.message:String(e)))}},refreshState:S},children:t})}}}]);